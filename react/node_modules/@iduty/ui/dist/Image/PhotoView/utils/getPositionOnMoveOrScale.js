"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const variables_1 = require("../variables");
const edgeHandle_1 = require("./edgeHandle");
function getPositionOnMoveOrScale(x, y, width, height, scale, toScale, clientX = innerWidth / 2, clientY = innerHeight / 2, container, offsetX = 0, offsetY = 0) {
    const innerHeight = container.getBoundingClientRect().height;
    const [closedEdgeX] = (0, edgeHandle_1.computePositionEdge)(x, toScale, width, innerWidth);
    const [closedEdgeY] = (0, edgeHandle_1.computePositionEdge)(y, toScale, height, innerHeight);
    const centerClientX = innerWidth / 2;
    const centerClientY = innerHeight / 2;
    const lastPositionX = centerClientX + x;
    const lastPositionY = centerClientY + y;
    const originX = clientX - (clientX - lastPositionX) * (toScale / scale) - centerClientX;
    const originY = clientY - (clientY - lastPositionY) * (toScale / scale) - centerClientY;
    const longModeEdge = height / width >= variables_1.longModeRatio && width * toScale === innerWidth;
    return {
        x: originX + (longModeEdge ? 0 : closedEdgeX ? offsetX / 2 : offsetX),
        y: originY + (closedEdgeY ? offsetY / 2 : offsetY),
        lastCX: clientX,
        lastCY: clientY,
    };
}
exports.default = getPositionOnMoveOrScale;
